query AdminGroupDevicesNotInControllGroup($id: Int!) {
  admin_group_by_pk(id: $id) {
    admin_group_devices(where: { control_group_devices: { control_group_id: { _is_null: true } } }) {
      serialno
    }
  }
}

query AdminGroups($limit: Int, $offset: Int, $where: admin_group_bool_exp) {
  adminGroups: admin_group(limit: $limit, offset: $offset, where: $where) {
    ...AdminGroupFields
  }
}

query AdminGroupDevices($where: admin_group_device_bool_exp, $limit: Int, $offset: Int) {
  devices: admin_group_device(where: $where, limit: $limit, offset: $offset) {
    ...DeviceData
  }
}

query AdminGroupStatus($where: admin_group_bool_exp, $offset: Int, $limit: Int) {
  adminGroups: admin_group(where: $where) {
    devices: admin_group_devices(limit: $limit, offset: $offset) {
      zappi: admin_group_device_zappi {
        ...ZappiStatus
      }
      eddi: admin_group_device_eddi {
        ...EddiStatus
      }
    }
  }
}

mutation CreateAdminGroup($name: String!, $aggregatorId: String!) {
  adminGroup: insert_admin_group_one(object: { name: $name, aggregator_id: $aggregatorId }) {
    ...AdminGroupFields
  }
}

mutation RemoveAdminGroupByAggregatorId($aggregatorId: String!) {
  adminGroup: delete_admin_group(where: { aggregator_id: { _eq: $aggregatorId } }) {
    returning {
      ...AdminGroupFields
    }
  }
}

mutation AddDeviceToAdminGroup($objects: [admin_group_device_insert_input!]!) {
  response: insert_admin_group_device(objects: $objects) {
    affectedRows: affected_rows
  }
}

mutation RemoveDeviceFromAdminGroup($adminGroupId: Int!, $serialNos: [Int!]!) {
  response: delete_admin_group_device(
    where: { admin_group_id: { _eq: $adminGroupId }, serialno: { _in: $serialNos } }
  ) {
    affectedRows: affected_rows
  }
}

fragment AdminGroupFields on admin_group {
  id
  name
}

query DeviceHubSerialNo($serialNo: bigint = "") {
  eddi: eddi_by_pk(serialno: $serialNo) {
    hubSerialNo: hubserialno
  }
  zappi: zappi_by_pk(serialno: $serialNo) {
    hubSerialNo: hubserialno
  }
}